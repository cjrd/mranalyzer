<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Mars Rover Analyzer (Machine Learning and Instrument Autonomy Group - JPL): seg Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Mars Rover Analyzer (Machine Learning and Instrument Autonomy Group - JPL)
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">seg Namespace Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Segment images taken by the mars rover.  
<a href="namespaceseg.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a032eed9956caf94e573a0651890f3d08"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceseg.html#a032eed9956caf94e573a0651890f3d08">shares_std_val_within_dist</a> (List[int] xy, spsp.KDTree ptIndex, List[int] ptVals, np.ndarray sigmaMap, float kdist)</td></tr>
<tr class="memdesc:a032eed9956caf94e573a0651890f3d08"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal helper function for determining if a pixel shares a standard deviation value with any points within a given distance.  <a href="namespaceseg.html#a032eed9956caf94e573a0651890f3d08">More...</a><br /></td></tr>
<tr class="separator:a032eed9956caf94e573a0651890f3d08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40bbadb15636bf3648fd86d402a54208"><td class="memItemLeft" align="right" valign="top">np.ndarray&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceseg.html#a40bbadb15636bf3648fd86d402a54208">crop_rover</a> (np.ndarray image, np.ndarray canny, np.ndarray sigmaMap, float xydist=50)</td></tr>
<tr class="memdesc:a40bbadb15636bf3648fd86d402a54208"><td class="mdescLeft">&#160;</td><td class="mdescRight">Crop the rover out of the image.  <a href="namespaceseg.html#a40bbadb15636bf3648fd86d402a54208">More...</a><br /></td></tr>
<tr class="separator:a40bbadb15636bf3648fd86d402a54208"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae222cbaa27f047c91421031f6630f60b"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceseg.html#ae222cbaa27f047c91421031f6630f60b">crop_rover_fast</a> (np.ndarray image, np.ndarray canny, float xydist=50)</td></tr>
<tr class="memdesc:ae222cbaa27f047c91421031f6630f60b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Crop the rover out of the image.  <a href="namespaceseg.html#ae222cbaa27f047c91421031f6630f60b">More...</a><br /></td></tr>
<tr class="separator:ae222cbaa27f047c91421031f6630f60b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00138226f80996d0a6fdb83bf9ce75f6"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceseg.html#a00138226f80996d0a6fdb83bf9ce75f6">seg</a> (**kwargs)</td></tr>
<tr class="memdesc:a00138226f80996d0a6fdb83bf9ce75f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Segment an image to only include the rover.  <a href="namespaceseg.html#a00138226f80996d0a6fdb83bf9ce75f6">More...</a><br /></td></tr>
<tr class="separator:a00138226f80996d0a6fdb83bf9ce75f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3c8a54f768599d64b7911d73c7ccd01"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceseg.html#ad3c8a54f768599d64b7911d73c7ccd01">save_debugging_images</a> (np.ndarray img, np.ndarray sigmaMap, np.ndarray edges, np.ndarray rover, str outname, float sig)</td></tr>
<tr class="memdesc:ad3c8a54f768599d64b7911d73c7ccd01"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save the rover images to disk that can be useful for debugging: (1) the original image (2) the sigma map (3) the canny edge image (4) the cropped rover image.  <a href="namespaceseg.html#ad3c8a54f768599d64b7911d73c7ccd01">More...</a><br /></td></tr>
<tr class="separator:ad3c8a54f768599d64b7911d73c7ccd01"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Segment images taken by the mars rover. </p>
<p >This subpackage contains functions for performing a segmentation of images taken by the mars rover, such that it will segment out the rover itself. The main function for this subpackage is <a class="el" href="namespaceseg.html#a00138226f80996d0a6fdb83bf9ce75f6" title="Segment an image to only include the rover.">seg()</a>, which can be called from the command line as follows: <code>mra seg</code>; see <code>mra seg --help</code> for more information. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a40bbadb15636bf3648fd86d402a54208" name="a40bbadb15636bf3648fd86d402a54208"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40bbadb15636bf3648fd86d402a54208">&#9670;&nbsp;</a></span>crop_rover()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> np.ndarray seg.crop_rover </td>
          <td>(</td>
          <td class="paramtype">np.ndarray&#160;</td>
          <td class="paramname"><em>image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">np.ndarray&#160;</td>
          <td class="paramname"><em>canny</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">np.ndarray&#160;</td>
          <td class="paramname"><em>sigmaMap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float &#160;</td>
          <td class="paramname"><em>xydist</em> = <code>50</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Crop the rover out of the image. </p>
<p >This function operates by determining if a pixel shares a standard deviation range with <em>any</em> edge pixels within a given distance. If it does, then it is considered to be part of the rover.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">image</td><td>(np.ndarray): Image array: 2d array of pixel values </td></tr>
    <tr><td class="paramname">canny</td><td>(np.ndarray): Canny edge detection map </td></tr>
    <tr><td class="paramname">sigmaMap</td><td>(np.ndarray): Standard deviation map of the image </td></tr>
    <tr><td class="paramname">xydist</td><td>(int, optional): Max distance to edge pixels to be considered part of the rover. Defaults to 50.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>(np.ndarray): Image array same size of the original image, but with all non-rover pixels set to 0 </dd></dl>

</div>
</div>
<a id="ae222cbaa27f047c91421031f6630f60b" name="ae222cbaa27f047c91421031f6630f60b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae222cbaa27f047c91421031f6630f60b">&#9670;&nbsp;</a></span>crop_rover_fast()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def seg.crop_rover_fast </td>
          <td>(</td>
          <td class="paramtype">np.ndarray&#160;</td>
          <td class="paramname"><em>image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">np.ndarray&#160;</td>
          <td class="paramname"><em>canny</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float &#160;</td>
          <td class="paramname"><em>xydist</em> = <code>50</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Crop the rover out of the image. </p>
<p >This function operates by determining if a pixel is within a pixel radius of an edge pixel. If it is, then it is considered to be part of the rover. This function is 10x-20x faster than crop_rover, and in most cases, produces similar results.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">image</td><td>(np.ndarray): Image array: 2d array of pixel values </td></tr>
    <tr><td class="paramname">canny</td><td>(np.ndarray): Canny edge detection map </td></tr>
    <tr><td class="paramname">xydist</td><td>(int, optional): Max distance to edge pixels to be considered part of the rover. Defaults to 50.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>(np.ndarray): Image array same size of the original image, but with all non-rover pixels set to 0 </dd></dl>

</div>
</div>
<a id="ad3c8a54f768599d64b7911d73c7ccd01" name="ad3c8a54f768599d64b7911d73c7ccd01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3c8a54f768599d64b7911d73c7ccd01">&#9670;&nbsp;</a></span>save_debugging_images()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def seg.save_debugging_images </td>
          <td>(</td>
          <td class="paramtype">np.ndarray&#160;</td>
          <td class="paramname"><em>img</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">np.ndarray&#160;</td>
          <td class="paramname"><em>sigmaMap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">np.ndarray&#160;</td>
          <td class="paramname"><em>edges</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">np.ndarray&#160;</td>
          <td class="paramname"><em>rover</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>outname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>sig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Save the rover images to disk that can be useful for debugging: (1) the original image (2) the sigma map (3) the canny edge image (4) the cropped rover image. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">img</td><td>(np.ndarray): Image array: 2d array of pixel values </td></tr>
    <tr><td class="paramname">sigmaMap</td><td>(np.ndarray): Standard deviation map of the image </td></tr>
    <tr><td class="paramname">edges</td><td>(np.ndarray): Canny edge detection map </td></tr>
    <tr><td class="paramname">rover</td><td>(np.ndarray): Cropped image with only the rover pixels </td></tr>
    <tr><td class="paramname">outname</td><td>(str): </td></tr>
    <tr><td class="paramname">sig</td><td>(float): </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a00138226f80996d0a6fdb83bf9ce75f6" name="a00138226f80996d0a6fdb83bf9ce75f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00138226f80996d0a6fdb83bf9ce75f6">&#9670;&nbsp;</a></span>seg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def seg.seg </td>
          <td>(</td>
          <td class="paramtype">**&#160;</td>
          <td class="paramname"><em>kwargs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Segment an image to only include the rover. </p>
<p >This segmentation function operates under the assumption that the rover produces edges in the image, and that the edge regions are the only part of the image that we care about.</p>
<p >Run <code>mra seg --help</code> to see all input options and consult README.md for more details. </p>

</div>
</div>
<a id="a032eed9956caf94e573a0651890f3d08" name="a032eed9956caf94e573a0651890f3d08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a032eed9956caf94e573a0651890f3d08">&#9670;&nbsp;</a></span>shares_std_val_within_dist()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> bool seg.shares_std_val_within_dist </td>
          <td>(</td>
          <td class="paramtype">List[int]&#160;</td>
          <td class="paramname"><em>xy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">spsp.KDTree&#160;</td>
          <td class="paramname"><em>ptIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">List[int]&#160;</td>
          <td class="paramname"><em>ptVals</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">np.ndarray&#160;</td>
          <td class="paramname"><em>sigmaMap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>kdist</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Internal helper function for determining if a pixel shares a standard deviation value with any points within a given distance. </p>
<p >This helper function is necessary in order to multiprocess this check.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">xy</td><td>(List[int]): [x,y] coordinates of the pixel to check </td></tr>
    <tr><td class="paramname">ptIndex</td><td>(sps.KDTree): index of all pixels that are edges, for finding nearest edge neighbors for a given pixel </td></tr>
    <tr><td class="paramname">ptVals</td><td>(List[int]): standard deviation values of all edge pixels </td></tr>
    <tr><td class="paramname">sigmaMap</td><td>(np.array): standard deviation map of the image </td></tr>
    <tr><td class="paramname">kdist</td><td>(float): distance to check for edge pixels neighbors </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>(bool): True if the pixel shares a standard deviation value with an edge pixel within kdist, False otherwise </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
